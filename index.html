<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            margin: 0;
            color: #333;
        }

        .calculator {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 300px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        #display {
            grid-column: span 4;
            background-color: #e9ecef;
            border: none;
            border-radius: 8px;
            font-size: 2.5em;
            padding: 15px 10px;
            text-align: right;
            margin-bottom: 10px;
            color: #333;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .calculator button {
            background-color: #f8f9fa;
            border: none;
            border-radius: 8px;
            padding: 20px;
            font-size: 1.5em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .calculator button:hover {
            background-color: #e2e6ea;
            transform: translateY(-1px);
        }

        .calculator button:active {
            background-color: #dae0e5;
            transform: translateY(0);
        }

        .calculator button.operator {
            background-color: #6c757d;
            color: #ffffff;
        }

        .calculator button.operator:hover {
            background-color: #5a6268;
        }

        .calculator button.operator:active {
            background-color: #545b62;
        }

        .calculator button.equals {
            background-color: #007bff;
            color: #ffffff;
            grid-column: span 2;
        }

        .calculator button.equals:hover {
            background-color: #0069d9;
        }

        .calculator button.equals:active {
            background-color: #0062cc;
        }

        .calculator button.clear {
            background-color: #dc3545;
            color: #ffffff;
        }

        .calculator button.clear:hover {
            background-color: #c82333;
        }

        .calculator button.clear:active {
            background-color: #bd2130;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <input type="text" id="display" value="0" readonly>
        <button class="clear" data-clear>C</button>
        <button class="operator" data-operator="division">/</button>
        <button class="operator" data-operator="multiplication">*</button>
        <button data-number>7</button>
        <button data-number>8</button>
        <button data-number>9</button>
        <button class="operator" data-operator="subtract">-</button>
        <button data-number>4</button>
        <button data-number>5</button>
        <button data-number>6</button>
        <button class="operator" data-operator="add">+</button>
        <button data-number>1</button>
        <button data-number>2</button>
        <button data-number>3</button>
        <button data-number class="decimal">.</button>
        <button data-number>0</button>
        <button class="equals" data-equals>=</button>
    </div>

    <script>
        const display = document.getElementById('display');
        let currentInput = '0';
        let previousInput = '';
        let operation = null;
        let shouldResetDisplay = false;

        function appendNumber(number) {
            if (currentInput === 'Error: Div by 0') {
                clear(); // Clear error state before new input
            }
            
            if (shouldResetDisplay) {
                currentInput = number;
                shouldResetDisplay = false;
            } else {
                if (number === '.' && currentInput.includes('.')) return;
                if (currentInput === '0' && number !== '.') {
                    currentInput = number;
                } else {
                    currentInput += number;
                }
            }
            updateDisplay();
        }

        function chooseOperation(op) {
            if (currentInput === 'Error: Div by 0') return; // Cannot operate on error
            if (currentInput === '') return;
            if (previousInput !== '') {
                compute();
            }
            operation = op;
            previousInput = currentInput;
            shouldResetDisplay = true;
        }

        function compute() {
            let computation;
            const prev = parseFloat(previousInput);
            const current = parseFloat(currentInput);
            if (isNaN(prev) || isNaN(current)) return;

            switch (operation) {
                case 'add':
                    computation = prev + current;
                    break;
                case 'subtract':
                    computation = prev - current;
                    break;
                case 'multiplication':
                    computation = prev * current;
                    break;
                case 'division':
                    if (current === 0) {
                        currentInput = 'Error: Div by 0';
                        operation = null;
                        previousInput = '';
                        shouldResetDisplay = true;
                        updateDisplay();
                        return;
                    }
                    computation = prev / current;
                    break;
                default:
                    return;
            }
            currentInput = computation.toString();
            operation = null;
            previousInput = '';
            shouldResetDisplay = true;
        }

        function clear() {
            currentInput = '0';
            previousInput = '';
            operation = null;
            shouldResetDisplay = false;
            updateDisplay();
        }

        function updateDisplay() {
            display.value = currentInput;
        }

        // Event Listeners
        document.querySelectorAll('[data-number]').forEach(button => {
            button.addEventListener('click', () => {
                appendNumber(button.innerText);
            });
        });

        document.querySelectorAll('[data-operator]').forEach(button => {
            button.addEventListener('click', () => {
                chooseOperation(button.dataset.operator);
            });
        });

        document.querySelector('[data-equals]').addEventListener('click', () => {
            compute();
            updateDisplay();
        });

        document.querySelector('[data-clear]').addEventListener('click', () => {
            clear();
        });

        // Initial display update
        updateDisplay();
    </script>
</body>
</html>